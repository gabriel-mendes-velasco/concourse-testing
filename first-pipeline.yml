#resource_types:
#- name: git-resource
#  type: registry-image
#  source:
#    repository: concourse/git-resource
#    tag: latest

resources:
- name: hello-repo
  type: git
  source:
    uri: https://github.com/gabriel-mendes-velasco/concourse-testing.git
    branch: main

jobs:
- name: say-world
  public: true
  plan:
    - get: hello-repo
    - task: making-world
      config: 
        platform: linux
        image_resource:
          type: registry-image
          source: 
            repository: busybox
        inputs: 
          - name: hello-repo
        run:
          path: /bin/sh
          args: 
            - -c
            - |
              echo "Ajustando a config do repo"
              git config --global --add safe.directory /tmp/build/get
              echo "Executando o script hello.sh"
              cat hello.sh

